<div class="loader" *ngIf="spinner">
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
</div><div class="overlay" *ngIf="spinner"></div>
<p-toast></p-toast>

<div class="col-12 lg:col-12 xl:col-12" >

        <div class="grid" style="margin-left: 0rem!important;">
            <div class="col-12 lg:col-12 xl:col-12" >

                   <!-- <div *ngIf="dodiStatus" style="width: 100%;"> -->
                    <div style="width: 100%;">
                    <router-outlet></router-outlet>
                       <div class="col-12 lg:col-12 xl:col-12">

                                <div class="grid" style="margin-left: 0rem!important;">
                                        <div style="padding-left: 10px; font-size: x-large;">
                                           DEVICE: {{WaterData?.device}} &nbsp;&nbsp;<p-badge [value]="WaterData?.status=='Y'?'Online':'Offline'" [severity]="WaterData?.status=='Y'?'success':'danger'"></p-badge>

                                        </div>
                                        <div class="roww">
                                            <div class="coll">
                                                    DATE: {{WaterData?.date | date:'dd/MM/yyyy'}} &nbsp;TIME: {{WaterData.time}}
                                            </div>
                                            <div class="coll">
                                                <div >Signal:
                                                    <span style="font-weight: 800;">{{convertToPercentage(WaterData?.tw?WaterData?.tw:0)| number:'1.2-2' }}%</span>
                                                    <i class="icon__signal-strength signal-0" *ngIf="(!WaterData?.tw)||WaterData?.tw==0">
                                                        <span class="bar-1"></span>
                                                        <span class="bar-2"></span>
                                                        <span class="bar-3"></span>
                                                        <span class="bar-4"></span>
                                                    </i>
                                                    <i class="icon__signal-strength signal-1" *ngIf="convertToPercentage(WaterData?.tw) >=1 && convertToPercentage(WaterData?.tw) <=25">
                                                        <span class="bar-1"></span>
                                                        <span class="bar-2"></span>
                                                        <span class="bar-3"></span>
                                                        <span class="bar-4"></span>
                                                    </i>
                                                    <i class="icon__signal-strength signal-2" *ngIf="convertToPercentage(WaterData?.tw) >=26 && convertToPercentage(WaterData?.tw) <=50">
                                                        <span class="bar-1"></span>
                                                        <span class="bar-2"></span>
                                                        <span class="bar-3"></span>
                                                        <span class="bar-4"></span>
                                                    </i>
                                                    <i class="icon__signal-strength signal-3" *ngIf="convertToPercentage(WaterData?.tw) >=51 && convertToPercentage(WaterData?.tw) <=75">
                                                        <span class="bar-1"></span>
                                                        <span class="bar-2"></span>
                                                        <span class="bar-3"></span>
                                                        <span class="bar-4"></span>
                                                    </i>
                                                    <i  class="icon__signal-strength signal-4" *ngIf="convertToPercentage(WaterData?.tw)>75">
                                                        <span class="bar-1"></span>
                                                        <span class="bar-2"></span>
                                                        <span class="bar-3"></span>
                                                        <span class="bar-4"></span>
                                                    </i>
                                                    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                                                    <p-button icon="pi pi-clock"
                                                    class="flex-auto md:flex-initial whitespace-nowrap"
                                                    (click)="show()" label="Scheduling"/>
                                                </div>
                                            </div>
                                        </div>


                                    <!-- <button (click)="back()" pButton pRipple type="button" icon="pi pi-arrow-left" class="p-button-rounded p-button-outlined">BACK</button> -->
                                    <div class="col-12 lg:col-12 xl:col-3"  style="text-align: center;">
                                        <div class="card mb-0" style="box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2); transition: 0.3s; width: 100%; border-radius: 10px; padding: 0px!important;">
                                            <div style="border-radius: 10px 10px 0 0; background-color: #307f8f; height:40px;" class="tiles__header">
                                              <div style="margin: 10px; position: absolute; height: 23px; width: 23px;">
                                                <i class="pi pi-clock text-white-600 text-xl" style="position: absolute; padding-top: 3px; padding-left: 5px;"></i>
                                              </div>
                                              <div style="padding-left: 50px; position: absolute;">
                                                <h5 style="color: white;">{{ getCardTitle('Total Flow', WaterData?.device) }}</h5>
                                              </div>
                                            </div>
                                            <h3 style="text-align: center;">
                                              {{ WaterData?.total_flow1?WaterData?.total_flow1:0.00}}
                                            </h3>
                                          </div>
                                    </div>
                                        <div class="col-12 lg:col-12 xl:col-3"  style="text-align: center;">
                                            <div class="card mb-0" style="box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2); transition: 0.3s; width: 100%; border-radius: 10px; padding: 0px!important;">
                                                <div style="border-radius: 10px 10px 0 0; background-color: #6f8f30; height:40px;" class="tiles__header">
                                                  <div style="margin: 10px; position: absolute; height: 23px; width: 23px;">
                                                    <i class="pi pi-clock text-white-600 text-xl" style="position: absolute; padding-top: 3px; padding-left: 5px;"></i>
                                                  </div>
                                                  <div style="padding-left: 50px; position: absolute;">
                                                    <h5 style="color: white;">{{ getCardTitle('Flow Rate', WaterData?.device) }}</h5>
                                                  </div>
                                                </div>
                                                <h3 style="text-align: center;">
                                                  {{ WaterData?.flow_rate1?WaterData?.flow_rate1:0.00}}
                                                </h3>
                                              </div>
                                        </div>
                                        <div class="col-12 lg:col-12 xl:col-3"  style="text-align: center;">
                                            <div class="card mb-0" style="box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2); transition: 0.3s; width: 100%; border-radius: 10px; padding: 0px!important;">
                                                <div style="border-radius: 10px 10px 0 0; background-color: #53308f; height:40px;" class="tiles__header">
                                                  <div style="margin: 10px; position: absolute; height: 23px; width: 23px;">
                                                    <i class="pi pi-clock text-white-600 text-xl" style="position: absolute; padding-top: 3px; padding-left: 5px;"></i>
                                                  </div>
                                                  <div style="padding-left: 50px; position: absolute;">
                                                    <h5 style="color: white;">{{ getCardTitle('Total Pressure', WaterData?.device) }}</h5>
                                                  </div>
                                                </div>
                                                <h3 style="text-align: center;">
                                                  {{ WaterData?.pressure?WaterData?.pressure:0.00}}
                                                </h3>
                                              </div>
                                        </div>
                                        <div class="col-12 lg:col-12 xl:col-3"  style="text-align: center;">
                                            <div class="card mb-0" style="box-shadow: 0 4px 8px 0 rgba(8, 101, 118, 0.704); transition: 0.3s; width: 100%; border-radius: 10px; padding: 0px!important;">
                                                <div style="border-radius: 10px 10px 0 0; background-color: #308f86; height:40px;" class="tiles__header">
                                                  <div style="margin: 10px; position: absolute; height: 23px; width: 23px;">
                                                    <i class="pi pi-clock text-white-600 text-xl" style="position: absolute; padding-top: 3px; padding-left: 5px;"></i>
                                                  </div>
                                                  <div style="padding-left: 50px; position: absolute;">
                                                    <h5 style="color: white;">{{ getCardTitle('Battery', WaterData?.device) }}</h5>
                                                    <!-- <h5 style="color: white;">{{ getCardTitle('Battery', WaterData?.device) }}</h5> -->
                                                  </div>
                                                </div>
                                                <h3 style="text-align: center;">
                                                  <!-- 89 % -->
                                                  {{ getBatPercentage(WaterData?.bat_v?WaterData?.bat_v:0)}}
                                                </h3>
                                              </div>
                                        </div>

                                    <div class="card" style="width: 100%;
                                    margin-top: 20px;
                                    margin-bottom: 20px;
                                    height: 160px;">
                                        <h5>Start-Stop</h5><br><br>
                                        <!-- <div class="grid p-fluid " >
                                            <div *ngFor="let valveState of valves; let i = index" class="col-12 lg:col-12 xl:col-1" style="text-align: center;">
                                                <div class="field">
                                                  <label class="switch switch-green">
                                                    <input type="checkbox" [checked]="valveState" [disabled]="isDisabled(i)" class="switch-input" (change)="onCheckboxChange(i, $event)">
                                                    <span class="switch-label" data-on="On" data-off="Off"></span>
                                                    <span class="switch-handle"></span>
                                                  </label>
                                                </div>
                                                <label>VALVE {{ i + 1 }}</label>
                                              </div>
                                        </div> -->
                                        <div class="grid p-fluid " >

                                            <div class="col-12 lg:col-12 xl:col-1"  style="text-align: center;">

                                                <div class="field">
                                                    <label class="switch switch-green">
                                                        <input type="checkbox" [checked]="do1" [disabled]="isDisabled('do1')" class="switch-input" (change)="onCheckboxChange('do1', $event)">
                                                        <span class="switch-label" data-on="On" data-off="Off"></span>
                                                        <span class="switch-handle"></span>
                                                    </label>
                                                </div>
                                               <label>VALVE 1</label>
                                                 <!-- <div class="null led" *ngIf="!led1"></div>
                                                    <div class="green led"  *ngIf="led1"></div> -->
                                            </div>
                                            <div class="col-12 lg:col-12 xl:col-1" style="text-align: center;">

                                                <div class="field">
                                                    <label class="switch switch-green">
                                                        <input type="checkbox" [checked]="do2" [disabled]="isDisabled('do2')"  class="switch-input" (change)="onCheckboxChange('do2', $event)">
                                                        <span class="switch-label" data-on="On" data-off="Off"></span>
                                                        <span class="switch-handle"></span>
                                                    </label>
                                                </div>
                                                 <label>VALVE 2</label>
                                                <!--<div class="null led" *ngIf="!led2"></div>
                                                <div class="red led" *ngIf="led2"></div> -->
                                            </div>
                                            <div class="col-12 lg:col-12 xl:col-1" style="text-align: center;">

                                                <div class="field">
                                                    <label class="switch switch-green">
                                                        <input type="checkbox"[checked]="do3" [disabled]="isDisabled('do3')"  class="switch-input" (change)="onCheckboxChange('do3', $event)">
                                                        <span class="switch-label" data-on="On" data-off="Off"></span>
                                                        <span class="switch-handle"></span>
                                                    </label>
                                                </div>
                                                 <label>VALVE 3</label>
                                              <!--  <div class="null led" *ngIf="!led3"></div>
                                                    <div class="yellow led" *ngIf="led3"></div> -->
                                            </div>
                                            <div class="col-12 lg:col-12 xl:col-1" style="text-align: center;">

                                                <div class="field">
                                                    <label class="switch switch-green">
                                                        <input type="checkbox" [checked]="do4" [disabled]="isDisabled('do4')"  class="switch-input" (change)="onCheckboxChange('do4', $event)">
                                                        <span class="switch-label" data-on="On" data-off="Off"></span>
                                                        <span class="switch-handle"></span>
                                                    </label>
                                                </div>
                                                <label>VALVE 4</label>
                                                 <!--<div class="null led" *ngIf="!led4"></div>
                                                <div class="pink led" *ngIf="led4"></div> -->
                                            </div>
                                            <div class="col-12 lg:col-12 xl:col-1" style="text-align: center;">

                                                <div class="field">
                                                    <label class="switch switch-green">
                                                        <input type="checkbox" [checked]="do5" [disabled]="isDisabled('do5')"  class="switch-input" (change)="onCheckboxChange('do5', $event)">
                                                        <span class="switch-label" data-on="On" data-off="Off"></span>
                                                        <span class="switch-handle"></span>
                                                    </label>
                                                </div>
                                               <label>VALVE 5</label>
                                                <!--  <div class="null led" *ngIf="!led5"></div>
                                                    <div class="merun led" *ngIf="led5"></div> -->
                                            </div>
                                            <div class="col-12 lg:col-12 xl:col-1" style="text-align: center;">

                                                <div class="field">
                                                    <label class="switch switch-green">
                                                        <input type="checkbox" [checked]="do6" [disabled]="isDisabled('do6')"  class="switch-input" (change)="onCheckboxChange('do6', $event)">
                                                        <span class="switch-label" data-on="On" data-off="Off"></span>
                                                        <span class="switch-handle"></span>
                                                    </label>
                                                </div>
                                                <label>VALVE 6</label>
                                                <!-- <div class="null led" *ngIf="!led6"></div>
                                                <div class="orange led" *ngIf="led6"></div> -->
                                            </div>
                                            <div class="col-12 lg:col-12 xl:col-1" style="text-align: center;">

                                                <div class="field">
                                                    <label class="switch switch-green">
                                                        <input type="checkbox" [checked]="do7" [disabled]="isDisabled('do7')"  class="switch-input" (change)="onCheckboxChange('do7', $event)">
                                                        <span class="switch-label" data-on="On" data-off="Off"></span>
                                                        <span class="switch-handle"></span>
                                                    </label>
                                                </div>
                                                 <label>VALVE 7</label>
                                                <!--<div class="null led" *ngIf="!led7"></div>
                                                <div class="pink led" *ngIf="led7"></div> -->
                                            </div>
                                            <div class="col-12 lg:col-12 xl:col-1" style="text-align: center;">

                                                <div class="field">
                                                    <label class="switch switch-green">
                                                        <input type="checkbox" [checked]="do8" [disabled]="isDisabled('do8')"  class="switch-input" (change)="onCheckboxChange('do8', $event)">
                                                        <span class="switch-label" data-on="On" data-off="Off"></span>
                                                        <span class="switch-handle"></span>
                                                    </label>
                                                </div>
                                                <label>VALVE 8</label>
                                                <!-- <div class="null led" *ngIf="!led8"></div>
                                                <div class="blue led" *ngIf="led8"></div> -->
                                            </div>
                                            <div class="col-12 lg:col-12 xl:col-1" style="text-align: center;">

                                                <div class="field">
                                                    <label class="switch switch-green">
                                                        <input type="checkbox" [checked]="do9" class="switch-input" (change)="onCheckboxChange('do9', $event)">
                                                        <span class="switch-label" data-on="On" data-off="Off"></span>
                                                        <span class="switch-handle"></span>
                                                    </label>
                                                </div>
                                                 <label>Pressure</label>
                                                <!--<div style="margin-top: 9px;" class="null led" *ngIf="!led9"></div>
                                                <div style="margin-top: 9px;" class="yellow led" *ngIf="led9"></div> -->

                                            </div>
                                            <hr>
                                        </div>

                                    </div>
                                    <div class="card" style="width: 100%;
                                    margin-top: 20px;
                                    margin-bottom: 20px;
                                    height: 180px;">
                                        <h5>Indicator</h5><br><br>
                                        <div class="grid p-fluid">
                                            <!-- <div style="text-align: center;padding-left: 20px; width: 12%;"> -->
                                                <div class="col-12 lg:col-12 xl:col-1" style="text-align: center;">
                                                    <h5 >VALVE 1</h5>
                                                    <div class="null led" *ngIf="!led1"></div>
                                                    <div class="green led"  *ngIf="led1"></div>
                                                </div>
                                            <!-- </div> -->
                                            <!-- <div  style="text-align: center;width: 12%;"> -->
                                                <div class="col-1 lg:col-12 xl:col-1">
                                                    <h5 >VALVE 2</h5>
                                                    <div class="null led" *ngIf="!led2"></div>
                                                    <div class="red led" *ngIf="led2"></div>
                                                <!-- </div> -->
                                            </div>
                                            <!-- <div  style="text-align: center;width: 12%;"> -->
                                                <div class="col-12 lg:col-12 xl:col-1" style="text-align: center;">
                                                    <h5 >VALVE 3</h5>
                                                    <div class="null led" *ngIf="!led3"></div>
                                                    <div class="yellow led" *ngIf="led3"></div>
                                                <!-- </div> -->
                                            </div>
                                            <!-- <div  style="text-align: center;width: 12%;"> -->
                                                <div class="col-12 lg:col-12 xl:col-1" style="text-align: center;">
                                                    <h5 >VALVE 4</h5>
                                                    <div class="null led" *ngIf="!led4"></div>
                                                    <div class="pink led" *ngIf="led4"></div>
                                                </div>

                                            <!-- </div> -->
                                            <!-- <div  style="text-align: center;width: 12%;"> -->
                                                <div class="col-12 lg:col-12 xl:col-1" style="text-align: center;">
                                                    <h5 >VALVE 5</h5>
                                                    <div class="null led" *ngIf="!led5"></div>
                                                    <div class="merun led" *ngIf="led5"></div>
                                                <!-- </div> -->

                                            </div>
                                            <!-- <div  style="text-align: center;width: 12%;"> -->
                                                <div class="col-12 lg:col-12 xl:col-1" style="text-align: center;">
                                                    <h5 >VALVE 6</h5>
                                                    <div class="null led" *ngIf="!led6"></div>
                                                    <div class="orange led" *ngIf="led6"></div>
                                                </div>

                                            <!-- </div> -->
                                            <!-- <div  style="text-align: center;width: 12%;"> -->
                                                <div class="col-12 lg:col-12 xl:col-1" style="text-align: center;">
                                                    <h5 >VALVE 7</h5>
                                                    <div class="null led" *ngIf="!led7"></div>
                                                    <div class="pink led" *ngIf="led7"></div>
                                                </div>

                                            <!-- </div> -->
                                            <!-- <div  style="text-align: center;width: 12%;"> -->
                                                <div class="col-12 lg:col-12 xl:col-1" style="text-align: center;">
                                                    <h5 >VALVE 8</h5>
                                                    <div class="null led" *ngIf="!led8"></div>
                                                    <div class="blue led" *ngIf="led8"></div>
                                                </div>

                                            <!-- </div> -->
                                            <!-- <div  style="text-align: center;width: 12%;"> -->
                                                <div class="col-12 lg:col-12 xl:col-1" style="text-align: center;">
                                                    <h5 >Pressure</h5>
                                                    <div class="null led" *ngIf="!led9"></div>
                                                    <div class="blue led" *ngIf="led9"></div>
                                                </div>

                                            <!-- </div> -->


                                        </div>
                                    </div>

                                </div>

                        </div>
                    </div>


        </div>

</div>





